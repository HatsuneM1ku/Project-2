<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Game</title>
    <style>
        body {
            background: linear-gradient(#2a2a2a, #111);
            color: #eaeaea;
            font-family: "Courier New", monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #text {
            width: 750px;
            font-size: 20px;
            line-height: 1.6;
            white-space: pre-line;
        }

        .cursor {
            display: inline-block;
            width: 6px;
            height: 1.2em;
            background: white;
            margin-left: 2px;
            vertical-align: text-bottom;
            animation: blink 1s infinite;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            50.1%,
            100% {
                opacity: 0;
            }
        }

        #start {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
        }

        #start span {
            font-size: 24px;
            color: #eaeaea;
        }
    </style>
</head>

<body>

    <div id="start"><span>[ click to start ]</span></div>
    <div id="text"><span class="cursor"></span></div>

    <script>
        const lines = [
            "Hello, I want to play a game.\n",
            "\nThe rule is simple.\n",
            "\nRead all the paragraphs and tell the complete story.\n",
            "\nSUCCESS or FAILURE.\n",
            "\nMake your choice."
        ];

        let lineIndex = 0;
        let charIndex = 0;
        const speed = 50; // 打字速度（越小越快）
        const textEl = document.getElementById("text");
        const cursor = document.querySelector(".cursor");

        // 创建音频对象（把 "your-audio.mp3" 换成你的文件名）
        const audio1 = new Audio("saw-i-want-to-play-a-game.mp3");
        const audio2 = new Audio("make-your-choice.mp3");
        audio2.volume = 0.4;

        // 点击开始
        document.getElementById("start").addEventListener("click", function () {
            this.style.display = "none";
            type();
        });

        function type() {
            if (lineIndex < lines.length) {
                const line = lines[lineIndex];
                if (charIndex < line.length) {
                    // 在光标前插入文字
                    cursor.insertAdjacentText('beforebegin', line[charIndex]);

                    // 当打到 "I" 时播放音频（第一行第7个字符）
                    if (lineIndex === 0 && charIndex === 7) {
                        audio1.play();
                    }

                    // 当打到 "Make" 的 M 时播放 audio2（第5行第2个字符）
                    if (lineIndex === 4 && charIndex === 1) {
                        audio2.play();
                    }
                  

                    charIndex++;
                    setTimeout(type, speed);
                } else {
                    lineIndex++;
                    charIndex = 0;
                    setTimeout(type, 400); // 行与行之间停顿
                }
            } else {
                // 打字结束后隐藏光标
                cursor.style.display = 'none';
                // 打字完成后显示提示
                setTimeout(() => {
                    const enterLink = document.createElement('span');
                    enterLink.textContent = "\n\n[ enter ]";
                    enterLink.style.cursor = 'pointer';
                    enterLink.onclick = () => { window.location.href = 'title.html'; };
                    cursor.insertAdjacentElement('afterend', enterLink);
                }, 500);
            }
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' && lineIndex === lines.length) {
                // 按下回车键后跳转到 title.html
                window.location.href = 'title.html';
            }
        });
    </script>

</body>

</html>